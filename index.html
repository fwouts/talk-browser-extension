<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/black.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <style>
      .line {
        display: block;
        font-size: 21px;
      }
      .line.focus {
        background: #041;
      }

      .left-align {
        text-align: left;
      }

      .two-columns {
        display: grid;
        grid-template-columns: 50% 50%;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
          <script type="text/template">
            ## Building a browser extension with React
          </script>
        </section>
        <section data-markdown data-background-color="#26c">
          <script type="text/template">
            What's a browser extension anyway?
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            ![Screenshot](images/extension-screenshot-badge.png)
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            ![Screenshot](images/extension-screenshot-badge-annotated.png)
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            ![Screenshot](images/extension-screenshot-popup.png)
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            ![Screenshot](images/extension-screenshot-popup-annotated.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## manifest.json

            ```json
            {
              "manifest_version": 2,
              "name": "PR Monitor",
              "version": "0.2.3",
              "permissions": ["alarms", "notifications", "storage"],
              "background": {
                "scripts": ["background.js"],
                "persistent": true
              },
              "browser_action": {
                "default_popup": "index.html"
              },
              "icons": { ... }
            }
            ```
            <p class="fragment" data-code-focus="2">
              <!-- Highlight manifest version -->
            </p>
            <p class="fragment" data-code-focus="3">
              <!-- Highlight name -->
            </p>
            <p class="fragment" data-code-focus="4">
              <!-- Highlight version -->
            </p>
            <p class="fragment" data-code-focus="5">
              <!-- Highlight permissions -->
            </p>
            <p class="fragment" data-code-focus="6-9">
              <!-- Highlight background script -->
            </p>
            <p class="fragment" data-code-focus="10-12">
              <!-- Highlight popup action -->
            </p>
            <p class="fragment" data-code-focus="13">
              <!-- Highlight icons -->
            </p>
            <p class="fragment">
              <!-- Highlight nothing -->
            </p>
          </script>
        </section>
        <section data-markdown class="left-align">
          <script type="text/template">
            ### Step by step
            <p class="fragment">- Create a standalone popup page</p>
            <p class="fragment">- Set up Webpack</p>
            <p class="fragment">- Compile the extension</p>
            <p class="fragment">- Add a background script</p>
            <p class="fragment">- Profit</p>
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## Standalone popup page
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            #### Install required packages

            ```shell
            $ yarn add react react-dom
            $ yarn add --dev \
            $      @babel/core @babel/cli \ # Compile modern JavaScript
            $      @babel/preset-react \ # Compile JSX
            $      webpack webpack-cli \ # Bundler
            $      babel-loader \ # Use Babel from Webpack
            $      html-webpack-plugin # HTML injection plugin for Webpack
            ```
            <p class="fragment" data-code-focus="1">
              <!-- Highlight --dev -->
            </p>
            <p class="fragment" data-code-focus="2">
              <!-- Highlight React -->
            </p>
            <p class="fragment" data-code-focus="3-4">
              <!-- Highlight Babel -->
            </p>
            <p class="fragment" data-code-focus="5">
              <!-- Highlight Webpack -->
            </p>
            <p class="fragment" data-code-focus="6">
              <!-- Highlight babel-loader -->
            </p>
            <p class="fragment" data-code-focus="7">
              <!-- Highlight html-webpack-plugin -->
            </p>
          </script>
        </section>
        <section>
          <div class="two-columns">
            <div data-markdown>
              <script type="text/template">
                #### src/popup.html

                ```html
                <!DOCTYPE html>
                <html lang="en">
                  <head>
                    <meta charset="utf-8">
                    <title>My extension</title>
                  </head>
                  <body>
                    <div id="root"></div>
                  </body>
                </html>
                ```
              </script>
            </div>
            <div data-markdown>
              <script type="text/template">
                #### src/popup.jsx

                ```jsx
                import React from "react";
                import ReactDOM from "react-dom";

                ReactDOM.render(
                  <div>Hello, World!</div>,
                  document.getElementById("root")
                );
                ```
              </script>
            </div>
          </div>
          <p class="fragment" data-code-focus="3-6">
            <!-- Highlight <head> and mention there is no <script> here yet -->
          </p>
          <p class="fragment" data-code-focus="8">
            <!-- Highlight "root" -->
          </p>
        </section>
        <section data-markdown data-separator-vertical="--">
          <script type="text/template">
            ### Compiling JSX with Babel

            ```shell
            $ yarn babel src/popup.jsx
            ```

            --

            ```js
            { SyntaxError: src/popup.jsx: Unexpected token (4:16)

              2 | import ReactDOM from "react-dom";
              3 |
            > 4 | ReactDOM.render(<div>Hello, World!</div>, document.getElementById("root"));
                |                 ^
              5 |
            ```

            --

            #### babel.config.js
            ```js
            module.exports = {
              presets: ["@babel/preset-react"]
            };

            --

            ```shell
            $ yarn babel src/popup.jsx
            ```
            ```js
            import React from "react";
            import ReactDOM from "react-dom";
            ReactDOM.render(
              React.createElement("div", null, "Hello, World!"),
              document.getElementById("root"));
            ```
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ### Bundling HTML + JSX
          </script>
        </section>
        <section data-markdown data-transition="slide-in none">
          <script type="text/template">
            #### webpack.config.js
            ```js
            module.exports = {
              entry: {
                popup: "./src/popup.jsx"
              },
              output: {
                filename: "[name].js"
              },
              mode: "development"
            };
            ```
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            #### webpack.config.js (continued)
            ```js
            module.exports = {
              ...
              module: {
                rules: [
                  {
                    include: __dirname + "/src",
                    loader: "babel-loader",
                    test: /\.jsx?$/
                  }
                ]
              }
            };
            ```
          </script>
        </section>
        <section data-markdown data-transition="none">
          <script type="text/template">
            #### webpack.config.js (continued)
            ```js
            const HtmlWebpackPlugin = require("html-webpack-plugin");

            module.exports = {
              ...,
              plugins: [
                new HtmlWebpackPlugin({
                  template: "src/popup.html",
                  inject: true,
                  chunks: ["popup"]
                })
              ]
            };
            ```
          </script>
        </section>
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        history: true,
        dependencies: [
          { src: "plugin/markdown/marked.js" },
          { src: "plugin/markdown/markdown.js" },
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true },
          { src: "node_modules/highlight.js/lib/highlight.js" },
          {
            src: "node_modules/reveal-code-focus/reveal-code-focus.js",
            async: true,
            callback: function() {
              RevealCodeFocus();
            }
          }
        ]
      });
    </script>
  </body>
</html>
